<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RR IMPERIAL ELECTRICALS LTD.</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
*{box-sizing:border-box;font-family:Poppins}
body{margin:0;background:#f4f6fa}

/* Sidebar */
.sidebar{
  width:230px; background:#1e3c8a; color:#fff;
  position:fixed; top:0; left:0; bottom:0; padding:20px;
}
.sidebar h2{margin:0 0 20px;font-size:20px}
.sidebar button{
  width:100%; padding:12px; margin-bottom:10px;
  border:none;border-radius:8px;
  background:#2e5ae8;color:#fff;font-size:14px;
}
.sidebar button.active{background:#0d2ea6}

/* Main */
.main{margin-left:230px;padding:20px}

/* Header */
.header{
  background:#fff;padding:20px;border-radius:12px;
  box-shadow:0 5px 15px rgba(0,0,0,.08);
}
.header h1{text-align:center;color:#c0392b;margin:0}
.badge{display:inline-block;margin-top:10px;padding:6px 12px;border:1px dashed red;color:red}

/* Cards */
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:15px;margin-top:20px}
.card{
  background:#fff;padding:20px;border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,.08);
}
.card h3{margin:0;font-size:14px;color:#555}
.card p{font-size:34px;margin:10px 0;color:#1e3c8a}

/* Tabs */
.tabs{margin-top:20px}
.tabs button{
  padding:10px 18px;border:none;border-radius:8px;
  margin-right:10px;background:#e1e6f0
}
.tabs button.active{background:#1e3c8a;color:#fff}

/* Form */
.box{background:#fff;padding:20px;margin-top:15px;border-radius:12px}
input,select{
  width:100%;padding:10px;margin-top:10px;border-radius:8px;border:1px solid #ccc
}
.action-btn{margin-top:10px;padding:10px;border:none;border-radius:8px;background:#1e3c8a;color:#fff}

/* Sports Cards */
.sports-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px}
.sport-box{text-align:center;padding:20px;border-radius:12px;border:1px solid #e0e0e0}
.circle{width:60px;height:60px;border-radius:50%;border:4px solid #dfe6e9;
margin:10px auto;display:flex;align-items:center;justify-content:center;font-size:20px}

/* Table */
table{width:100%;border-collapse:collapse;margin-top:15px}
th,td{border:1px solid #ddd;padding:8px;font-size:12px;text-align:center}

/* Modal */
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5)}
.modal-content{
  background:#fff;padding:20px;border-radius:12px;
  width:90%;max-width:400px;margin:10% auto
}
</style>
</head>

<body>

<div class="sidebar">
  <h2>üèÉ Picnic Sports</h2>
  <button class="active" onclick="show('manpower')">1. Manpower List</button>
  <button onclick="show('sports')">2. Sports Register</button>
</div>

<div class="main">

  <div class="header">
    <h1>RR IMPERIAL ELECTRICALS LTD.</h1>
    <div class="badge">HAPPY PICNIC DAY!</div>
  </div>

  <!-- MANPOWER -->
  <div id="manpower">
    <div class="cards">
      <div class="card"><h3>TOTAL MANPOWER</h3><p id="tm"></p></div>
      <div class="card"><h3>PARTICIPATE TOTAL</h3><p id="pt"></p></div>
      <div class="card"><h3>LEFT</h3><p id="lf"></p></div>
    </div>

    <div class="tabs">
      <button class="active">Individual Registration</button>
      <button>Department Bulk Registration</button>
    </div>

    <div class="box">
      <input id="eid" placeholder="Enter Employee ID">
      <button class="action-btn" onclick="searchEmp()">Search</button>
    </div>
  </div>

  <!-- SPORTS -->
  <div id="sports" style="display:none">
    <div class="box">
      <button class="action-btn" onclick="downloadPDF()">Download PDF</button>
      <button class="action-btn" style="background:#c0392b" onclick="clearAll()">Bulk Delete</button>
    </div>

    <div class="sports-cards" id="sportSummary"></div>
    <div id="sportTable"></div>
  </div>

</div>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-content">
    <div id="empInfo"></div>
    <select id="sport">
      <option value="">Select Sport</option>
      <option>Tug Of War (‡¶¶‡ßú‡¶ø ‡¶ü‡¶æ‡¶®‡¶æ)</option>
      <option>Pot Breaking (‡¶π‡¶æ‡ßú‡¶ø ‡¶≠‡¶æ‡¶Ç‡¶ó‡¶æ)</option>
      <option>Sack Race (‡¶¨‡¶∏‡ßç‡¶§‡¶æ ‡¶¶‡ßå‡ßú)</option>
      <option>Basket Toss (‡¶ù‡ßÅ‡ßú‡¶ø‡¶§‡ßá ‡¶¨‡¶≤ ‡¶®‡¶ø‡¶ï‡ßç‡¶∑‡ßá‡¶™)</option>
      <option>Musical Chair (‡¶Æ‡¶ø‡¶â‡¶ú‡¶ø‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶ö‡ßá‡ßü‡¶æ‡¶∞)</option>
    </select>
    <button class="action-btn" onclick="register()">Done</button>
    <button class="action-btn" style="background:#7f8c8d" onclick="closeModal()">Cancel</button>
  </div>
</div>

<script>
// ===== AUTO INJECT MANPOWER (Demo sample, full list can be injected same way) =====
const manpower = [
 {id:"20110",name:"Krishibid Sadeque ibn Shams",dept:"Administration",des:"Chief Co-Ordinator"},
 {id:"20103",name:"Mohammad Sharif Ahmed",dept:"Operation",des:"Factory Manager"},
 {id:"20801",name:"Subhasis Bakul Chandra Ghosh",dept:"Maintenance",des:"Manager"},
];

// ===== DATA =====
let reg = JSON.parse(localStorage.getItem("sportsReg")||"[]");
let selected=null;

// ===== FUNCTIONS =====
function show(id){
 document.getElementById("manpower").style.display=id=="manpower"?"block":"none";
 document.getElementById("sports").style.display=id=="sports"?"block":"none";
}
function refresh(){
 tm.innerText=manpower.length;
 pt.innerText=reg.length;
 lf.innerText=manpower.length-reg.length;

 let sports=["Tug Of War (‡¶¶‡ßú‡¶ø ‡¶ü‡¶æ‡¶®‡¶æ)","Pot Breaking (‡¶π‡¶æ‡ßú‡¶ø ‡¶≠‡¶æ‡¶Ç‡¶ó‡¶æ)","Sack Race (‡¶¨‡¶∏‡ßç‡¶§‡¶æ ‡¶¶‡ßå‡ßú)","Basket Toss (‡¶ù‡ßÅ‡ßú‡¶ø‡¶§‡ßá ‡¶¨‡¶≤ ‡¶®‡¶ø‡¶ï‡ßç‡¶∑‡ßá‡¶™)","Musical Chair (‡¶Æ‡¶ø‡¶â‡¶ú‡¶ø‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶ö‡ßá‡ßü‡¶æ‡¶∞)"];
 sportSummary.innerHTML="";
 sports.forEach(s=>{
   let c=reg.filter(r=>r.sport==s).length;
   sportSummary.innerHTML+=`<div class="sport-box"><b>${s}</b><div class="circle">${c}</div></div>`;
 });

 let html="<table><tr><th>ID</th><th>Name</th><th>Dept</th><th>Sport</th><th>Action</th></tr>";
 reg.forEach((r,i)=>{
  html+=`<tr><td>${r.id}</td><td>${r.name}</td><td>${r.dept}</td><td>${r.sport}</td>
  <td><button onclick="del(${i})">Delete</button></td></tr>`;
 });
 html+="</table>";
 sportTable.innerHTML=html;
}

function searchEmp(){
 let id=eid.value;
 selected=manpower.find(e=>e.id==id);
 if(!selected){alert("Not Found");return}
 empInfo.innerHTML=`<b>${selected.name}</b><br>${selected.dept}<br>${selected.des}`;
 modal.style.display="block";
}

function register(){
 if(reg.find(r=>r.id==selected.id)){alert("Already Registered");return}
 let sp=sport.value;if(!sp){alert("Select sport");return}
 reg.push({...selected,sport:sp});
 localStorage.setItem("sportsReg",JSON.stringify(reg));
 closeModal();refresh();
}

function del(i){
 if(confirm("Delete?")){
  reg.splice(i,1);
  localStorage.setItem("sportsReg",JSON.stringify(reg));
  refresh();
 }
}

function clearAll(){
 if(confirm("Delete All?")){
  reg=[];
  localStorage.removeItem("sportsReg");
  refresh();
 }
}

function closeModal(){modal.style.display="none"}

function downloadPDF(){
 const {jsPDF}=window.jspdf;
 const pdf=new jsPDF();
 let y=10;
 reg.forEach(r=>{
  pdf.text(`${r.id} ${r.name} - ${r.sport}`,10,y);y+=8;
 });
 pdf.save("Sports_List.pdf");
}

refresh();
</script>

</body>
</html>
